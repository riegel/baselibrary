  ### 
  ### This file is automatically generated by /system/clearimage/generateDLL.html
  ### Generated: 07/06/2018 21:49
  ### Do not make changes here
  ###
  #/#

# DLL Function Generator /#
function DLL() locals funcs,x,currentlibrary,libout,i,params do
 funcs='"API",""
"node","2"
"appendNode","3"
"NodeList","2"
"appendNodeList","3"
"TableNode","2"
"appendTableNode","3"
"appendArray","2"
"attrib","2"
"attribPrep","1"
"webpush_nodes","1"
"push_nodes","1"
"CLEARJS",""
"endAJAX","0"
"endOVERLAY","0"
"ajaxGOTO","1"
"updateVARS","1"
"writeHTML","2"
"appendHTML","2"
"prependHTML","2"
"runSCRIPT","1"
"ajax.clicked","0"
"onceHTML","1"
"showonce","1"
"reset","0"
"checked_option","2"
"select_option","2"
"ajaxrequest","0"
"JSONescape","1"
"CLEAR_JSONescape","1"
"AJAXpush","2"
"isjsonnumber","1"
"DEPRECATED",""
"ci_parsehref","1"
"ci_parsehrefall","3"
"EMAIL",""
"send_email","4"
"send_email_attachments","5"
"ci_email","5"
"ci_email_plus_attach","6"
"email_files","4"
"queue_email","4"
"queue_email_attachments","5"
"send_email_pop","7"
"quickmail","3"
"text2html","1"
"html2text","1"
"B64encode","1"
"B64decode","1"
"ENCODE_DECODE",""
"qp_decode","1"
"header_decode","1"
"FILEINFO",""
"system_filelist","1"
"savetext","3"
"loadtext","2"
"ci_filetype","1"
"ci_fileinfo","1"
"getfilepath","1"
"pakfileinfo","1"
"ci_filelist","1"
"fileinfo2","1"
"typetoicon","1"
"GETIMAGE",""
"ci_imageALLALLoptions","13"
"GETLINK",""
"formlink","2"
"pagelink","3"
"pagelink1","1"
"get_","0"
"page_","0"
"message","1"
"GETMAIL",""
"pop3_connect","2"
"HTTP",""
"CSVnamevalue","1"
"XMLnamevalue","1"
"JSONnamevalue","1"
"namespace","2"
"CSVnamespacevalue","2"
"JSONnamespacevalue","2"
"XMLnamespacevalue","2"
"deXMLnamespacevalue","2"
"httptotable","1"
"httpResponseToTable","1"
"curl.get","2"
"curl.post","3"
"http.get","1"
"http.post","2"
"http.push","2"
"IDENTIFY",""
"ci_identifycache","1"
"ci_identifycache2","2"
"ci_identifyalloptions","2"
"ci_identify","1"
"IMAGEMAP",""
"ci_imgmap2","2"
"ci_imgmap","2"
"IMAGE_CORE",""
"img","5"
"img11","11"
"ci_parse","1"
"getvalue","2"
"ci_pophref","1"
"ci_pophrefeditor","1"
"ci_imgcrop","6"
"ci_imageALL2options","13"
"ci_imageALLoptions","11"
"ci_convertimagealloptions","8"
"ci_randomimage","1"
"syscall","2"
"INDIRECTION",""
"scope","2"
"code","1"
"indirection","1"
"indirectionset","2"
"MP3INFO",""
"mp3_filelist","1"
"mp3_getlength","1"
"mp3_fileinfo","1"
"mp3_writeinfo","1"
"PAGEBUILDER",""
"ci_showps","4"
"ci_showpsALL","5"
"ci_showeps","2"
"ci_showepsALL","3"
"ci_makepdf","1"
"ci_savepages","7"
"postscriptescape","1"
"ci_psblock","5"
"ci_pagebuilder","7"
"ci_printpage","8"
"ci_pagebuilder_edit","9"
"ci_geneps","3"
"ROUTE",""
"route_whatURI","1"
"parsetag","1"
"setTagVars","1"
"forensics","1"
"get_request_type","0"
"SECURITY",""
"ci_sysmvcp","3"
"removesecurityinfo","1"
"securityinfo","1"
"modifysecurityinfo","2"
"TIME",""
"nows","0"
"seconds","1"
"nowUTC","0"
"TimeZoneToUTC_minutes","2"
"TimeZoneList","0"
"TimeZoneToUTC","2"
"UTCtoLocaltime","2"
"LocaltimetoUTC","2"
"moment","2"
"endOfMonth","1"
"shift","3"
"dateToHTMLOS","2"
"getTime.conf","1"
"TimeZoneDetails","1"
"UNITTEST",""
"addunittest","3"
"getunittest","1"
"rununittest","1"
"unittest_cmd","3"
"unittest_runcommands","1"
"UPLOAD",""
"UTF",""
"safeTRIMRIGHT","1"
"safeTRIMLEFT","1"
"safeTRIM","1"
"safeLEFT","2"
"safeRIGHT","2"
"safeMIDDLE","3"
"asUTF","1"
"middle_","3"
"length_","1"
"left_","2"
"right_","2"
"reverse_","2"
"concat_","2"
"asText","1"
"UTILITY",""
"normalizeCSV","2"
"build_cache_for","4"
"iconpage","1"
"nakeddomain","1"
"freemem","0"
"addstartlink","3"
"removestartlink","1"
"hash","1"
"aliascommand","1"
"getgetvars","2"
"ajax_setvars","1"
"datetime","1"
"date","1"
"ci_tableVSclean","1"
"ci_tableVS","1"
"ci_table","1"
"ci_ttable","1"
"ci_cookieread","1"
"ci_cookiewrite","3"
"aestivafilename","1"
"ci_texttovar","1"
"ci_vartotext","1"
"ci_deltexttovar","3"
"ci_hextodec","1"
"ci_dectohex","1"
"unpostprep","1"
"VERSION",""
"ci_versionhistory","0"
"ci_version","0"
"dll_versionhistory","0"
"dll_version","0"
"server_version","0"'
 funcs=CSVTOTABLE(funcs)
 currentlibrary=''
 libout=''
 for name=funcs rowname=x do
  if x[2]='' then
   currentlibrary=lower(x[1]) libout=libout+lf+'# '+currentlibrary+' /#'+lf
  else
   if x[2]=0 then
    params=''
   else
    params=''
    for name=i value=1 to x[2] do
     params=params+'param_name_'+i+','
    /for
    params=left(params,length(params)-1)
   /if
   libout=libout+' function '+x[1]+'('+params+') do if DLL'+currentlibrary+'.lib="ERROR" then DLL'+currentlibrary+'.lib="" expand file="/system/clearimage/libraries/'+currentlibrary+'.lib" /expand /if return DLL'+x[1]+'('+params+') /return /function'+lf
  /if
 /for
 return libout /return
/function
# End DLL Function Generator /#

  if not(isfile("/system/clearimage/constants.lib")) then syscp("/system/clearimage/constants_INIT.lib","/system/clearimage/constants.lib") /if
  expand file="/system/clearimage/constants.lib" /expand



  if DLLgetimage.lib="ERROR" then
   DLLgetimage.lib=""
   $(DLL())
   expand file="/system/clearimage/libraries/getimage.lib" /expand 
   x='obj_'+random(10000,99999)+'_ext'
   $('function get(o)   locals b do b="'+x+'."+o      return @b /return /function')
   $('function set(o,v) locals b do b="'+x+'."+o @b=v return @b /return /function')

   if usernum*1<>0 then
    stamp=ci_cookieread('stamp')
    if stamp=0 or stamp='' or stamp='ERROR' or not(isinteger(stamp)) then
     stamp=idgen()
    /if
    o=ci_cookiewrite('stamp',stamp,adddays(now,365))
   /if

  /if

  temp=get_htmlos.conf()

  # Some serious legacy here. Oh Well. /#
  if isfile('/apps/imageservices/getimageRUN.lib') then
   if isfile('/apps/imageservices/_alternate/getimageRUN.lib') then
    expand file='/apps/imageservices/_alternate/getimageRUN.lib' /expand
   else
    expand file='/apps/imageservices/getimageRUN.lib' /expand
   /if
  /if







if page='/apps/route/startlink.html' then
 get_request_type()
/if

if page='/apps/route/index.html' or page='/apps/route/index_nosession.html' then
 if route_digit='ERROR' then route_digit='' /if
 route_whatURI('tag')
 if usernum*1>0 then
  temp1=split(getlink1("/apps/route/index.html"),'/')
  if htmlos.conf.addWWW='Y' then
   o=cookiewrite('route'+route_digit+'_www.'+domainname,temp1[1,rows(temp1)],adddays(now,365))
   o=cookiewrite('route'+route_digit+'_'+domainname,temp1[1,rows(temp1)],adddays(now,365))
  else
   o=cookiewrite('route'+route_digit+'_'+domainname,temp1[1,rows(temp1)],adddays(now,365))
  /if
  sessionid=usernum
 else
  if sessionid='' or sessionid='ERROR' then
   sessionid=idgen()
  /if
 /if
/if